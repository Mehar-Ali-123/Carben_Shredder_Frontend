import React, { useContext, useEffect, useState } from "react";
import profilePic from "../assets/images/unknownAvatar.png";
import iconCards from "../assets/images/icon-2.png";
import { Link } from "react-router-dom";
import ProfileChart from "../components/ProfileChart";
import SubcriptionCard from "../components/SubcriptionCard";
import axios from "axios";
import { backend_url, server } from "../server";
import LoaderContext from "../components/LoaderContext.js/LoaderContext";
import { toast } from "react-toastify";
import ErrorModal from "../components/ErrorModal";

function PersonalProfile() {
  const [userData, setUserData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [errorModalOpen, setErrorModalOpen] = useState(false);

  useEffect(() => {
    const fetchData = async () => {
      try {
        setLoading(true);
        console.log(loading);
        const authToken = localStorage.getItem("authToken");
        if (!authToken) {
          throw new Error("Authentication token not found");
        }

        const response = await axios.get(`${server}/get-profile-data`, {
          headers: {
            Authorization: `Bearer ${authToken}`,
          },
        });
        if (!response.ok) {
          // throw new Error('Network response was not ok');
          console.log("Network response was not ok");
        }
        const { user } = response.data;
        console.log(user);
        setUserData(user);
        setLoading(false);
      } catch (error) {
        if (
          error?.message == "Network Error" ||
          error?.data?.message == "500"
        ) {
          setErrorModalOpen(true);
        } else {
          console.error("Error fetching user data:", error);
          if (error) {
            toast.error("Please login to continue", {
              autoClose: 3000,
              style: {
                marginTop: "100px",
              },
            });
          }
          setLoading(false);
        }
      }
    };

    fetchData();
  }, []);

  const closeModal = () => {
    setErrorModalOpen(false);
  };

  if (loading) {
    return <></>;
  }

  const totalAmountKg = userData?.cnughtCreatedOrder.reduce((acc, obj) => {
    return acc + parseInt(obj.amount_kg || 0, 10); // ParseInt with base 10 to convert string to number
  }, 0);
  const roundedAmount = (totalAmountKg / 40 / 25 || 0).toFixed(3);

  return (
    <>
      <div class="bg-gray-100 mt-48">
        <div class="container mx-auto py-8">
          <div class="grid grid-cols-4 lg:grid-cols-12 gap-6 px-4">
            <div class="col-span-4 lg:col-span-3">
              <div class="bg-white shadow rounded-lg p-6">
                <div class="flex flex-col items-center">
                  <img
                    src={
                      userData
                        ? `${backend_url}/${userData.avatar}`
                        : profilePic
                    }
                    className="object-cover w-32 h-32 bg-gray-300 rounded-full mb-4 shrink-0"
                    alt="Profile Pic"
                  />

                  <h1 class="text-xl font-bold">
                    {userData ? userData.name : "Unknown"}
                  </h1>
                  <p class="text-gray-700">Carbon Shredder</p>
                  <div class="mt-6 flex flex-wrap gap-4 justify-center">
                    <Link
                      to={userData ? "/edit-profile" : "/sign-in"}
                      class="  text-white py-2 text-sm rounded-md w-44 text-center bg-primary px-4"
                    >
                      {userData ? "Edit Profile" : "Please Login"}
                    </Link>
                  </div>
                </div>
                <hr class="my-6 border-t border-gray-300" />
                <div class="flex flex-col">
                  <span class="text-gray-700 text-justify   font-semibolds tracking-wider mb-2">
                    At Carbon Shredder, we are not just a service; we are a
                    mission-driven movement. Our goal is to revolutionize the
                    way individuals and communities engage with their carbon
                    footprint. We're dedicated to developing a real-time carbon
                    tracking subscription service that not only informs but
                    empowers action towards a more sustainable world
                  </span>
                </div>
              </div>
            </div>

            <div class="col-span-4 lg:col-span-9 lg:p-5">
              <h1 class="text-3xl font-bold mb-6 ">Carbon Offsets History</h1>
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 mb-10 gap-3">
                <div class="bg-white shadow rounded-xl w-full h-[150px] p-4 flex flex-col justify-center items-start gap-2">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 53.7 67.76"
                    id="house"
                  >
                    <path
                      d="M51,53.12a1,1,0,0,0,.83.45l.17,0c.19,0,4.67-.82,6-3.86,1.22-2.84-.35-7.77-.53-8.32a1,1,0,0,0-.56-.61,1,1,0,0,0-.82,0c-.53.24-5.14,2.5-6.37,5.34h0C48.41,49.16,50.91,53,51,53.12Zm.54-6.21h0c.62-1.43,2.82-2.91,4.34-3.77.43,1.69.88,4.32.26,5.76s-2.58,2.2-3.82,2.53C51.74,50.3,51,48.31,51.56,46.91Z"
                      transform="translate(-23.15 -16.12)"
                    ></path>
                    <path
                      d="M75.39,33.12,53.73,17a4.55,4.55,0,0,0-5.26-.11l-8,5.43v-.39a4,4,0,0,0-4-4h-2.4a1,1,0,0,0-1,1v8.4L24.74,33a3.61,3.61,0,0,0,2,6.59h1.1V78a.8.8,0,0,0,0,.15.78.78,0,0,0,0,.21,1.08,1.08,0,0,0,.11.18s0,.09.07.13l0,0h0a14.89,14.89,0,0,0,10.9,5.14,11.39,11.39,0,0,0,4.82-1,12.51,12.51,0,0,0,6.23-7,1,1,0,0,0,0-.76l0,.08h0a8.64,8.64,0,0,1,.76-6,8.29,8.29,0,0,1,1.72-2.2,15.76,15.76,0,0,0,1.82.1c2.12,0,5.39-.4,7.31-2.57,2.84-3.23,2.83-10.83,2.83-11.16a1,1,0,0,0-.34-.74,1,1,0,0,0-.79-.24c-.31,0-7.81,1-10.65,4.26-2.34,2.66-1.79,7-1.43,8.77a10.34,10.34,0,0,0-2.23,2.83,10.13,10.13,0,0,0-.71,1.65c-.33-.86-.59-1.49-.64-1.6A21.29,21.29,0,0,0,44,62.75c1.59-1.4,4.77-4.64,4.33-8.08-.55-4.3-7-9.24-7.27-9.45a1,1,0,0,0-1.39.18c-.54.68-5.29,6.75-4.75,11s5.91,6.63,7,7.11A19.61,19.61,0,0,1,46,69.08a39.2,39.2,0,0,1,2.16,6.31A10.62,10.62,0,0,1,43,81c-4.14,1.92-9.51.52-13.18-3.4v-38H69.54V78a1,1,0,0,0,2,0V39.62h1.7a3.61,3.61,0,0,0,2.15-6.5ZM54.28,57.9c1.64-1.86,5.81-3,8.25-3.41-.12,2.49-.67,6.79-2.3,8.65a6,6,0,0,1-3.58,1.71,7.29,7.29,0,0,0,1.14-.76,8.68,8.68,0,0,0,3-5.07,1,1,0,0,0-2-.39,6.77,6.77,0,0,1-2.32,3.91,6.67,6.67,0,0,1-3.12,1.37,1.17,1.17,0,0,0-.26.1C52.92,62.27,52.84,59.54,54.28,57.9ZM36.87,56.13c-.32-2.51,2.19-6.58,3.72-8.69,2,1.66,5.39,5,5.71,7.49.27,2.11-1.7,4.5-3.23,5.93a.94.94,0,0,0-.29-.42,6.19,6.19,0,0,1-2-2.83,5.83,5.83,0,0,1,.4-4.46,1,1,0,1,0-1.79-.9,7.84,7.84,0,0,0-.51,6,7.6,7.6,0,0,0,.83,1.69C38.32,58.93,37.06,57.61,36.87,56.13ZM50.08,75.05A.43.43,0,0,0,50,75v0A.48.48,0,0,1,50.08,75.05ZM35.09,20h1.4a2,2,0,0,1,2,2v1.75L35.09,26ZM74.76,36.52a1.56,1.56,0,0,1-1.52,1.1H26.76a1.6,1.6,0,0,1-.9-2.93L49.6,18.55A2.52,2.52,0,0,1,51,18.12a2.49,2.49,0,0,1,1.51.5L74.2,34.73A1.56,1.56,0,0,1,74.76,36.52Z"
                      transform="translate(-23.15 -16.12)"
                    ></path>
                  </svg>
                  <h2 className="text-2xl font-semibold tracking-wide">
                    {roundedAmount} tone
                  </h2>
                  <span className="tracking-wide">Total CO2e offset</span>
                </div>
                <div class="bg-white shadow rounded-xl w-full h-[150px] p-4 flex flex-col justify-center items-start gap-2">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    enable-background="new 0 0 64 64"
                    viewBox="0 0 64 64"
                    id="insurance"
                  >
                    <path d="M27 51h-5c-.552 0-1 .447-1 1v3c0 .553.448 1 1 1h5c.552 0 1-.447 1-1v-3C28 51.447 27.552 51 27 51zM26 54h-3v-1h3V54zM43.729 50.916l-1.459 1.367 2.25 2.4C44.709 54.886 44.974 55 45.25 55s.541-.114.729-.316l3.75-4-1.459-1.367-3.021 3.222L43.729 50.916z"></path>
                    <path
                      d="M35,4.114V4c0-1.654-1.346-3-3-3s-3,1.346-3,3v0.114C13.309,5.287,1,15.55,1,28c0,0.347,0.18,0.669,0.475,0.851
		c0.295,0.183,0.663,0.198,0.973,0.044l0.395-0.198c4.551-2.248,9.898-2.252,14.31-0.002l0.4,0.2
		c0.249,0.125,0.539,0.139,0.799,0.042l3.706-1.39c2.375-0.953,5.072-0.641,7.223,0.842L31,29.535V35H10c-0.552,0-1,0.447-1,1v22
		c0,0.553,0.448,1,1,1h30.834c1.203,1.382,2.732,2.657,4.636,3.848C45.632,62.949,45.816,63,46,63s0.368-0.051,0.53-0.152
		c4.832-3.021,7.335-6.559,7.877-11.131l0.586-4.944c0.062-0.522-0.292-1.004-0.809-1.101c-1.099-0.207-2.169-0.538-3.185-0.978V36
		c0-0.553-0.448-1-1-1H33v-5.42l2.65-1.514c0.036-0.021,0.07-0.043,0.104-0.068c1.628-1.22,4.109-1.33,6.924-0.334l2.928,1.255
		c0.225,0.096,0.477,0.108,0.71,0.029l3.664-1.223c2.816-1.104,6.412-0.943,9.843,0.43l1.783,0.764
		c0.309,0.134,0.664,0.101,0.944-0.084C62.831,28.649,63,28.336,63,28C63,15.55,50.691,5.287,35,4.114z M11,37h18v20H11V37z
		 M52.421,51.481c-0.452,3.811-2.439,6.709-6.421,9.331c-3.981-2.622-5.969-5.521-6.421-9.332L39.1,47.438
		c2.167-0.532,4.214-1.488,5.973-2.796L46,44.139l0.927,0.504c1.759,1.308,3.807,2.264,5.973,2.796L52.421,51.481z M49,43.616
		c-0.315-0.2-0.635-0.394-0.932-0.617c-0.039-0.029-0.08-0.056-0.122-0.078l-1.468-0.799c-0.298-0.162-0.658-0.162-0.956,0
		l-1.468,0.799c-0.042,0.022-0.083,0.049-0.122,0.078c-1.773,1.33-3.888,2.254-6.117,2.673c-0.517,0.097-0.871,0.578-0.809,1.101
		l0.586,4.943c0.23,1.937,0.835,3.679,1.796,5.284H31V37h5v4.777c0,0.357,0.19,0.688,0.5,0.866c0.31,0.178,0.691,0.178,1,0l2-1.155
		l2,1.155c0.155,0.089,0.328,0.134,0.5,0.134c0.172,0,0.345-0.045,0.5-0.134c0.31-0.179,0.5-0.509,0.5-0.866V37h6V43.616z M38,37h3
		v3.045l-1-0.578c-0.31-0.178-0.691-0.178-1.001,0l-1,0.578V37z M31,4c0-0.552,0.449-1,1-1s1,0.448,1,1v0.02
		C32.667,4.011,32.335,4,32,4s-0.667,0.011-1,0.02V4z M3.076,26.396C4.102,15.64,15.371,7.006,29.5,6.086l-5.843,5.843
		c-3.931,3.931-6.22,9.053-6.583,14.549C12.678,24.574,7.599,24.531,3.076,26.396z M30.402,26.733C28.74,25.587,26.808,25,24.872,25
		c-1.199,0-2.399,0.226-3.538,0.682l-2.262,0.848c0.348-4.981,2.434-9.622,5.999-13.187L31,7.414v19.718L30.402,26.733z
		 M34.606,26.359L33,27.277V7.414l5.929,5.929c3.547,3.547,5.631,8.158,5.995,13.11l-1.518-0.65
		C39.908,24.562,36.786,24.76,34.606,26.359z M60.589,26.308c-3.921-1.571-8.053-1.733-11.29-0.461l-2.365,0.788
		c-0.328-5.555-2.622-10.738-6.59-14.706L34.5,6.086c14.154,0.922,25.438,9.585,26.429,20.368L60.589,26.308z"
                    ></path>
                  </svg>
                  <h2 className="text-2xl font-semibold tracking-wide">
                    {(userData && userData.cnughtCreatedOrder?.length) || "0"}
                  </h2>
                  <span className="tracking-wide">Orders Fulfilled</span>
                </div>
                <div class="bg-white shadow rounded-xl w-full h-[150px] p-4 flex flex-col justify-center items-start gap-2">
                  <img src={iconCards} width={50} height={50} alt="icon" />
                  <h2 className="text-2xl font-semibold tracking-wide">
                    {(userData &&
                      userData.cnughtCreatedOrder?.[
                        userData && userData.cnughtCreatedOrder.length - 1
                      ]?.amount_kg) ||
                      "0"}
                    kg
                  </h2>
                  <span className="tracking-wide">Current CO2e offset</span>
                </div>
                <div class="bg-white shadow rounded-xl w-full h-[150px] p-4 flex flex-col justify-center items-start gap-2">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 168 168"
                    id="dollar"
                  >
                    <circle cx="2" cy="150.289" r="2" fill="#2d4356"></circle>
                    <path
                      fill="#2d4356"
                      d="M11 148.28868H8a2 2 0 0 0 0 4h3a2 2 0 0 0 0-4zM160 148.28868h-3a2 2 0 0 0 0 4h3a2 2 0 0 0 0-4z"
                    ></path>
                    <circle cx="166" cy="150.289" r="2" fill="#2d4356"></circle>
                    <path
                      fill="#0bceb2"
                      d="M118.15387 156.28868h-8.30774a2.00641 2.00641 0 0 0 0 4h8.30774a2.00641 2.00641 0 0 0 0-4zM58.15387 156.28868H49.84613a2.00641 2.00641 0 0 0 0 4h8.30774a2.00641 2.00641 0 0 0 0-4zM104 156.28868H64a2 2 0 0 0 0 4H79.94v2H72a2 2 0 0 0 0 4H97a2 2 0 0 0 0-4H88.06v-2H104a2 2 0 0 0 0-4zM84 35.28868a53 53 0 1 0 53 53A53 53 0 0 0 84 35.28868zm0 102a49 49 0 1 1 49-49A49.05551 49.05551 0 0 1 84 137.28868z"
                    ></path>
                    <path
                      fill="#2d4356"
                      d="M87.68469,79.11376c-3.79651-1.24792-8.52142-2.801-8.52142-4.36566,0-2.2312,4.01184-2.4046,5.24146-2.4046a12.80174,12.80174,0,0,1,8.57025,3.171l.05194.04932a9.0739,9.0739,0,0,0,6.2157,2.86072,8.34817,8.34817,0,0,0,8.37964-8.29718,8.65837,8.65837,0,0,0-1.48541-4.81592q-.0303-.04541-.06183-.09c-2.872-4.05664-7.72046-6.95642-13.86023-8.34576V55.53179a7.77015,7.77015,0,1,0-15.5401,0v1.24872C65.75427,59.34179,61.75684,67.48937,61.75684,74.7481c0,13.8797,11.7298,17.7547,20.29449,20.584,5.617,1.85571,9.29883,3.23145,9.29883,5.36157,0,1.29419,0,3.46021-6.94543,3.46021-3.73682,0-7.063-1.58582-10.468-4.99072a8.71262,8.71262,0,0,0-6.39606-2.95532,8.359,8.359,0,0,0-7.03485,12.77588c3.20313,5.18359,9.21674,9.16907,16.16882,10.8512v1.21057a7.77015,7.77015,0,1,0,15.5401,0v-1.106c10.43195-2.18774,16.54175-9.18823,16.54175-19.24585C108.75653,86.04021,96.07581,81.872,87.68469,79.11376Zm.53009,37.391v4.54077a3.77026,3.77026,0,1,1-7.5401,0v-4.54077c-7.86493-.97314-14.02588-5.18921-16.78162-9.64868a4.35915,4.35915,0,0,1,3.64764-6.64819,4.75293,4.75293,0,0,1,3.56769,1.78381c3.40527,3.40527,7.70251,6.16223,13.29633,6.16223,7.37775,0,10.94543-2.43335,10.94543-7.46021,0-11.83728-29.59332-6.40454-29.59332-25.94562,0-7.21533,4.53955-13.45874,14.91785-14.5943v-4.622a3.77026,3.77026,0,1,1,7.5401,0V60.235c6.48828.81073,11.83984,3.40527,14.59552,7.29773a4.68032,4.68032,0,0,1,.812,2.5946,4.344,4.344,0,0,1-4.37964,4.29718,5.37058,5.37058,0,0,1-3.48523-1.78381,16.74633,16.74633,0,0,0-11.35266-4.29724c-6.72809,0-9.24146,3.16168-9.24146,6.4046,0,10.62189,29.59326,5.67633,29.59326,25.94562C104.75653,109.6129,99.0802,115.45043,88.21478,116.50475Z"
                    ></path>
                    <path
                      fill="#2d4356"
                      d="M150.72131 148.28868H106.3009a64 64 0 1 0-44.60175 0H17.27869a2.017 2.017 0 1 0 0 4H150.72131a2.017 2.017 0 1 0 0-4zM24 88.28868a60 60 0 1 1 60 60A60.068 60.068 0 0 1 24 88.28868zM68.30471 8.28868a3 3 0 1 0-3-3A3.00344 3.00344 0 0 0 68.30471 8.28868zm0-4.5a1.5 1.5 0 1 1-1.5 1.5A1.50148 1.50148 0 0 1 68.30471 3.78868zM135.881 29.28868a2 2 0 1 0 2 2A2.00229 2.00229 0 0 0 135.881 29.28868zm0 3a1 1 0 1 1 1-1A1.001 1.001 0 0 1 135.881 32.28868zM135.881 1.71132a2 2 0 1 0 2 2A2.00229 2.00229 0 0 0 135.881 1.71132zm0 3a1 1 0 1 1 1-1A1.001 1.001 0 0 1 135.881 4.71132zM160 58.16207a2 2 0 1 0 2 2A2.00229 2.00229 0 0 0 160 58.16207zm0 3a1 1 0 1 1 1-1A1.001 1.001 0 0 1 160 61.16207zM31 30.28868a2 2 0 1 0-2 2A2.00229 2.00229 0 0 0 31 30.28868zm-3 0a1 1 0 1 1 1 1A1.001 1.001 0 0 1 28 30.28868z"
                    ></path>
                    <polygon
                      fill="#0bceb2"
                      points="10.888 69.3 12.375 67.344 11.436 66.813 10.481 69.003 10.45 69.003 9.48 66.828 8.525 67.376 9.996 69.285 9.996 69.316 7.695 69.018 7.695 70.082 10.011 69.785 10.011 69.817 8.525 71.725 9.416 72.289 10.434 70.082 10.465 70.082 11.404 72.273 12.39 71.71 10.888 69.832 10.888 69.801 13.25 70.082 13.25 69.018 10.888 69.331 10.888 69.3"
                    ></polygon>
                    <polygon
                      fill="#0bceb2"
                      points="5.734 6.942 4.878 8.041 5.392 8.365 5.978 7.095 5.996 7.095 6.536 8.356 7.104 8.032 6.239 6.951 6.239 6.933 7.599 7.095 7.599 6.482 6.239 6.662 6.239 6.644 7.095 5.518 6.555 5.212 6.005 6.473 5.987 6.473 5.429 5.221 4.878 5.536 5.726 6.636 5.726 6.654 4.401 6.482 4.401 7.095 5.734 6.924 5.734 6.942"
                    ></polygon>
                    <polygon
                      fill="#0bceb2"
                      points="164.724 17.31 164.724 16.267 162.407 16.573 162.407 16.543 163.866 14.625 162.945 14.103 162.009 16.251 161.977 16.251 161.027 14.118 160.089 14.655 161.533 16.528 161.533 16.558 159.276 16.267 159.276 17.31 161.548 17.019 161.548 17.05 160.089 18.921 160.964 19.474 161.963 17.31 161.992 17.31 162.913 19.459 163.881 18.906 162.407 17.065 162.407 17.034 164.724 17.31"
                    ></polygon>
                    <polygon
                      fill="#0bceb2"
                      points="106.758 16.231 108.016 14.576 107.222 14.126 106.414 15.979 106.387 15.979 105.567 14.139 104.759 14.603 106.004 16.218 106.004 16.244 104.057 15.993 104.057 16.893 106.017 16.641 106.017 16.668 104.759 18.283 105.513 18.76 106.374 16.893 106.4 16.893 107.195 18.746 108.029 18.27 106.758 16.681 106.758 16.654 108.757 16.893 108.757 15.993 106.758 16.257 106.758 16.231"
                    ></polygon>
                  </svg>
                  <h2 className="text-2xl font-semibold tracking-wide">
                    {" "}
                    {(userData &&
                      userData.cnughtCreatedOrder?.[
                        userData && userData.cnughtCreatedOrder.length - 1
                      ]?.price_usd_cents / 100) ||
                      "0"}
                    $
                  </h2>
                  <span className="tracking-wide">Current Plan</span>
                </div>
              </div>
              <div className="flex  justify-center md:justify-between items-center flex-col md:flex-row gap-5">
                <p>
                  <span className="font-bold"> Issue Date : </span>
                  {(() => {
                    const createdOnString =
                      userData &&
                      userData.cnughtCreatedOrder?.[
                        userData && userData.cnughtCreatedOrder.length - 1
                      ]?.created_on;

                    if (!createdOnString) return "N/A"; // Handle missing date gracefully

                    const createdOnDate = new Date(createdOnString);
                    const day = createdOnDate.getDate();
                    const month = createdOnDate.getMonth() + 1;
                    const year = createdOnDate.getFullYear();
                    const formattedDate = `${day < 10 ? "0" : ""}${day}-${
                      month < 10 ? "0" : ""
                    }${month}-${year}`;
                    return formattedDate;
                  })()}
                </p>
                <p>
                  <span className="font-bold"> Expire Date : </span>
                  {(() => {
                    const createdOnString =
                      userData &&
                      userData.cnughtCreatedOrder?.[
                        userData && userData.cnughtCreatedOrder.length - 1
                      ]?.created_on;

                    if (!createdOnString) return "N/A"; // Handle missing date gracefully

                    const createdOnDate = new Date(createdOnString);
                    const expirationDate = new Date(
                      createdOnDate.getFullYear(),
                      createdOnDate.getMonth() + 1, // Increment month by 1 for next month
                      createdOnDate.getDate()
                    );
                    const day = expirationDate.getDate();
                    const month = expirationDate.getMonth() + 1;
                    const year = expirationDate.getFullYear();
                    const formattedDate = `${day < 10 ? "0" : ""}${day}-${
                      month < 10 ? "0" : ""
                    }${month}-${year}`;
                    return formattedDate;
                  })()}
                </p>
              </div>

              {/* <h1 class="text-3xl font-bold mb-6 mt-10 ">Progress Chart</h1>
              <ProfileChart /> */}
              <div className="flex justify-center items-center">
                <svg
                width="40%"
                height="50%"
                  xmlns="http://www.w3.org/2000/svg"
                  enable-background="new 0 0 1080 1080"
                  viewBox="0 0 1080 1080"
                  id="business-deal"
                >
                  <circle
                    cx="976.07"
                    cy="520.75"
                    r="70.35"
                    fill="none"
                    stroke="#c1c1c1"
                    stroke-dasharray="12.278 12.278"
                    stroke-miterlimit="10"
                  ></circle>
                  <path
                    fill="#f7f7f7"
                    d="M810.51 256.29c28.83 9.77 57.49 21.69 77.66 40.41 20.17 18.72 30.27 45.63 18.17 68.15-16.16 30.08-67.36 47.57-67.6 80.16-.17 23.34 27.61 41.15 55.66 49.64 28.04 8.48 59.09 11.54 84.6 23.94 38.49 18.71 56.54 54.93 63.93 89.68 7.67 36.08 4.56 77.16-28.37 103.34-40.93 32.54-108.63 28.87-166.58 21.93-77.33-9.26-154.32-20.14-231.29-31.01-168.74-23.84-337.48-47.69-506.22-71.53-18.09-2.56-36.92-5.35-51.62-13.92-29.19-17.01-31.67-52.13-14.7-77.2 16.97-25.07 48.36-42.1 79.54-56.85 31.18-14.74 64.1-28.68 87.46-50.45 23.35-21.77 34.97-53.99 17.3-78.77-14.97-20.99-47.14-32.21-61.16-53.59-18.48-28.17 2.78-64.15 36.31-82.13s454.59-13.44 606.91 38.2z"
                  ></path>
                  <path
                    fill="#ffbe55"
                    d="m876.9 569.68-12.75 2.54-1.83-9.17c-1.24-6.24-7.02-10.36-12.87-9.2l-62.85 12.54c-5.85 1.17-9.61 7.19-8.36 13.43l1.83 9.17-12.75 2.54c-1.45.29-2.38 1.79-2.08 3.33l13.35 66.95c.31 1.54 1.75 2.57 3.2 2.28l109.6-21.86c1.45-.29 2.38-1.79 2.08-3.33l-13.35-66.95c-.33-1.53-1.77-2.56-3.22-2.27zm-15.79 3.15-78.02 15.56-1.83-9.17c-.89-4.46 1.79-8.76 5.97-9.59l62.85-12.54c4.18-.83 8.31 2.11 9.2 6.57l1.83 9.17z"
                  ></path>
                  <path
                    fill="#fff"
                    d="m835.12 613.71-13.09 2.61-55.51-17.39.37-.53 55.28 17.32 12.59-2.51L879.17 576l.54.35z"
                  ></path>
                  <path
                    fill="#fcd2b1"
                    d="M535.07 464.76s-12.05-3.97-14.42-2.58-14.61 17.85-14.61 17.85l16.39 7.82 18.56-12.04-5.92-11.05zM824.31 544.99s9.82 19.9 7.76 23.45C830 572 807.77 576 807.77 576l-5.95-19.96 10.61-11.06h11.88z"
                  ></path>
                  <path
                    fill="#0a3951"
                    d="m653.83 864.43-51.81 16.81h63.07v-16.81zM782.24 864.43l-47.32 16.81h62.54l-3.21-16.81z"
                  ></path>
                  <path
                    fill="#083047"
                    d="m680.22 519.97-32.7 352.12h21.09s50.14-146.16 33.41-165.5c5.38-23.95 39.63-118.83 31.72-128.96-7.91-10.13-22.41-63.02-22.41-63.02l-31.11 5.36z"
                  ></path>
                  <path
                    fill="#0a3951"
                    d="m688.02 529.46 17 23.41 70.1 319.22h22.27s1.85-160.14-14.11-180.36c-6.38-36.18-9.4-159.25-14.11-172.74-21.28-1.06-77.15-7.62-77.15-7.62l-4 18.09z"
                  ></path>
                  <path
                    fill="#fff"
                    d="M806.87 357c-10.86-17.06-42.33-15.49-66.37-17.75-6.96-.65-12.77-3.58-17.71-4.25l-32.73 9.86c-1.88.4-28.18 2.33-31.19 4.14-.36.42-28.85 100.66-124 114 1 7 0 17 0 17s97.99 2.84 128.79-54.56c6.76 62.87 16.56 94.53 16.56 94.53l90 3.96s4.64-95.92 14.64-117.92c52 33 23 142 23 142s4 2 17 0C854.87 472 820.87 379 806.87 357z"
                  ></path>
                  <path
                    fill="#f2f2f2"
                    d="m702.02 354.25 10.48 14.96 21.24-32.33-7.72-4.88zM702.02 354.25l-3.26 14.96-10.74-22.98 4-6.98z"
                  ></path>
                  <path
                    fill="#ffbe55"
                    d="m699.83 365.39 2.19 6.77-10.61 117.05s13.55 53.94 14.46 50.64c.91-3.3 14.19-46.27 14.19-46.27l-12.09-121.25 1.06-7.01-7-11.08-2.2 11.15z"
                  ></path>
                  <path
                    fill="#0e538c"
                    d="M726.06 246.32c11 9 16 30 11 41s-18 17-23 23c-10-12-24-20-24-20l7-30 14-7 15-7z"
                  ></path>
                  <path
                    fill="#fcd2b1"
                    d="M692.06 315.9v26l10 15 24-22.25-9.5-46.05z"
                  ></path>
                  <path
                    fill="#ffe3ca"
                    d="M661.35 254.99c2.8 31.11-12.08 61.24 4.67 70.72 3.74 4.71 41.38 9.9 46.05-4.24s16.57-54.22 7.22-66.48c-9.34-12.26-57.94 0-57.94 0z"
                  ></path>
                  <path
                    fill="#0e538c"
                    d="M705.06 258.32c-2 8 0 23 8 25 0 3.82-.41 10.49-.7 14.82a4.296 4.296 0 0 0 4.05 4.58c1.88.1 3.65.08 3.65-.4 0-1 6-44 6-44h-21z"
                  ></path>
                  <ellipse
                    cx="721.32"
                    cy="289.65"
                    fill="#ffe3ca"
                    rx="11"
                    ry="6.67"
                    transform="rotate(-74.984 721.28 289.638)"
                  ></ellipse>
                  <path
                    fill="#0e538c"
                    d="m714.06 282.32-1 18 5 1 2-25zM726.42 260.22a273.124 273.124 0 0 1-50.56 7.3c-8.79.44-18.56.1-24.98-5.92-5.29-4.96-7.02-13.08-5.04-20.06s7.28-12.74 13.67-16.17c6.39-3.43 13.77-4.69 21.02-4.59-2.75-.47-5.14 2.71-4.6 5.45s3.13 4.69 5.84 5.38 5.55.37 8.34.15c6.99-.54 14.09-.41 20.88 1.32 6.79 1.72 13.55 5.4 16.77 11.63s1.49 15.22-4.86 18.18"
                  ></path>
                  <path
                    fill="#f2f2f2"
                    d="M68.12 881.24h943.75c7.16 0 12.96 5.8 12.96 12.96v68.83c0 7.16-5.8 12.96-12.96 12.96H68.12c-7.16 0-12.96-5.8-12.96-12.96V894.2c0-7.16 5.8-12.96 12.96-12.96z"
                  ></path>
                  <path
                    fill="#fcd2b1"
                    d="M505.83 464.76s12.06-3.97 14.42-2.58 14.61 17.85 14.61 17.85l-16.39 7.82-18.56-12.04 5.92-11.05zM216.59 544.99s-9.82 29.3-7.76 34.54c2.07 5.24 24.3 11.13 24.3 11.13l-2.07-22.83 5.69 9.08 2.59-9.08L228.48 545h-11.89z"
                  ></path>
                  <path
                    fill="#0a3951"
                    d="m387.08 864.43 51.81 16.81h-63.08v-16.81zM258.67 864.43l47.32 16.81h-62.54l3.21-16.81z"
                  ></path>
                  <path
                    fill="#083047"
                    d="m358.32 524.2 35.06 347.89h-21.09s-50.14-146.16-33.41-165.5c-5.38-23.95-39.63-118.83-31.72-128.96 7.91-10.13 22.41-63.02 22.41-63.02l28.75 9.59z"
                  ></path>
                  <path
                    fill="#0a3951"
                    d="m352.89 529.46-17 23.41-70.1 319.22h-22.27s-1.85-160.14 14.11-180.36c6.38-36.18 10.36-162.27 22.07-170.78 21.28-1.06 69.19-9.58 69.19-9.58l4 18.09z"
                  ></path>
                  <path
                    fill="#0e538c"
                    d="m360.04 567-22-48-44 48-20-36s-8-103-18-125c-52 33-23 142-23 142s-4 2-17 0c-30-76 4-169 18-191 10.86-17.06 42.76-20.89 66.8-23.15 6.96-.65 16.76 4.93 21.7 4.26 0 0 22.35-.75 41.35 4.53l.02.01c8.2 2.28 15.12 4.54 18.13 6.35 6 7-22 218-22 218z"
                  ></path>
                  <path
                    fill="#0e538c"
                    d="M382.04 349s17 99 124 114c-1 7 0 17 0 17s-103 3-131-59c-9-59 7-72 7-72z"
                  ></path>
                  <path
                    fill="#fff"
                    d="m358.32 341.14-18.98 118.99-38.5-126.28c6.96-.65 13.26-1.18 18.2-1.85l39.28 9.14z"
                  ></path>
                  <path
                    fill="#0e538c"
                    d="M314.88 243.67c-11 9-16 30-11 41s18 17 23 23c10-12 24-20 24-20l-7-30-14-7-15-7z"
                  ></path>
                  <path
                    fill="#fcd2b1"
                    d="M348.88 313.25v26l-10 15-24-22.25 9.5-46.05z"
                  ></path>
                  <path
                    fill="#ffe3ca"
                    d="M383.88 252.67c-3 33-1 70-5 75s-44 5-49-10-18-52-8-65 62 0 62 0z"
                  ></path>
                  <path
                    fill="#0e538c"
                    d="M335.88 255.67c2 8 0 23-8 25 0 3.82.41 10.49.7 14.82a4.296 4.296 0 0 1-4.05 4.58c-1.88.1-3.65.08-3.65-.4 0-1-6-44-6-44h21z"
                  ></path>
                  <ellipse
                    cx="319.62"
                    cy="287"
                    fill="#ffe3ca"
                    rx="6.67"
                    ry="11"
                    transform="rotate(-15.016 319.614 286.994)"
                  ></ellipse>
                  <path
                    fill="#0e538c"
                    d="m326.88 279.67 1 18-5 1-2-25zM331.23 257.12c5.74 4.57 13.36 6.71 20.63 5.79 5.76-.73 11.23-3.26 17.03-3.4 4.44-.11 8.78 1.2 13.2 1.62 5.1.48 10.46-.29 14.77-3.06 4.31-2.77 7.37-7.75 7-12.86-.51-7.13-7.42-12.46-14.48-13.62s-14.2.86-21.06 2.9c-6.85 2.03-13.97 4.12-21.04 3.09-4.95-.72-9.58-2.95-14.52-3.77-5.35-.9-10.98-.08-15.85 2.3-3.68 1.8-6.98 4.53-9.01 8.1s-2.65 8-1.24 11.85c1.27 3.46 4.09 6.23 7.39 7.87s7.05 2.22 10.74 2.15l6.44-8.96z"
                  ></path>
                  <path
                    fill="#f2f2f2"
                    d="m338.88 354.25-10.47 14.96-21.24-32.33 7.71-4.88zM338.88 354.25l3.26 14.96 10.75-22.98-4.01-6.98z"
                  ></path>
                  <path
                    fill="#ffbe55"
                    d="m341.07 364.31-2.19 6.11 9.08 35.63s-7.72 57.06-8.63 54.08-17.22-56.5-17.22-56.5l10.83-33.06-1.06-6.32 7-10 2.19 10.06z"
                  ></path>
                  <path
                    fill="#ffe3ca"
                    d="M507.8 484.79c1.93-2.7 7.73-9.93 7.73-9.93l14.68 9.93-10.04 6.57-12.37-6.57zM535.27 464.76s-7.52-3.65-12.57-3.97-11.7 6.87-11.7 6.87.21 1.29 2.9 1.29c2.68 0 8.05-2.58 8.05-2.58l13.55 5.68-.23-7.29z"
                  ></path>
                  <path
                    fill="#2a94f4"
                    d="M917.24 164.17H800.43c-23.13 0-42.05 18.91-42.05 42.02 0 16.15 9.24 30.23 22.69 37.26l-2.55 11.99s18.87-7.23 21.91-7.23h116.81c23.13 0 42.05-18.91 42.05-42.02 0-23.11-18.92-42.02-42.05-42.02z"
                  ></path>
                  <path
                    fill="none"
                    stroke="#2a94f4"
                    stroke-miterlimit="10"
                    d="M926.99 175.1H810.18c-23.13 0-42.05 18.91-42.05 42.02 0 16.15 9.24 30.23 22.69 37.26l-2.55 11.99s18.87-7.23 21.91-7.23h116.81c23.13 0 42.05-18.91 42.05-42.02 0-23.11-18.92-42.02-42.05-42.02z"
                  ></path>
                  <path
                    fill="#cce9ff"
                    d="M283.79 194.34H156.08c-5.31 0-9.66 4.35-9.66 9.66v60.01c0 5.31 4.35 9.66 9.66 9.66h96.4L270.37 287l-7.53-13.33h20.96c5.31 0 9.66-4.35 9.66-9.66V204c0-5.31-4.35-9.66-9.67-9.66z"
                  ></path>
                  <path
                    fill="none"
                    stroke="#cce9ff"
                    stroke-miterlimit="10"
                    d="M280.3 200.56H152.58c-5.31 0-9.66 4.35-9.66 9.66v60.01c0 5.31 4.35 9.66 9.66 9.66h96.4l17.89 13.33-7.53-13.33h20.96c5.31 0 9.66-4.35 9.66-9.66v-60.01c0-5.31-4.35-9.66-9.66-9.66z"
                  ></path>
                  <path
                    fill="#b6e7ff"
                    d="M125.31 893.62c21.68 0 30.83-17.31 34.43-35.68 4.07-20.72 1.08-42.77 1.08-42.77H89.8s-.11.84-.27 2.34c-1.32 13.04-5.6 76.11 35.78 76.11z"
                  ></path>
                  <path
                    fill="#85ddff"
                    d="M89.8 815.17c0 1.55 15.9 2.81 35.52 2.81 19.61 0 35.52-1.26 35.52-2.81s-15.9-2.81-35.52-2.81c-19.62 0-35.52 1.26-35.52 2.81z"
                  ></path>
                  <path
                    fill="#2a94f4"
                    d="M29.14 618.26s37.46 56.99 59.93 91.77 28.36 42 31.03 53.24c2.68 11.24 5.08 52.7 5.08 52.7h1.66s-.58-35.2-2.6-47.04c-1.96-11.45.14-15.56 1.75-27.6 1.61-12.04 3.75-31.3-8.43-44.68-12.17-13.38-8.96-26.49-13.24-35.31-4.28-8.83-37.46-19.53-41.74-28.63-4.28-9.1-23-14.72-33.44-14.45z"
                  ></path>
                  <path
                    fill="#41aaf7"
                    d="M29.14 618.26s11.77 13.38 19.8 17.93c8.03 4.55 11.77.53 17.92 11.5 6.15 10.97 6.39 15.79 12.02 21.4 5.63 5.62 12.32 5.89 12.86 18.19.54 12.31-2.67 22.74-2.67 22.74s-57.52-88.82-59.93-91.76z"
                  ></path>
                  <path
                    fill="#2a94f4"
                    d="M122.22 815.97h-1.68s-.5-11.39-5.03-16.92c-2.92-3.57-15.32-7.62-27.57-12.48-6.75-2.67-13.45-5.59-18.51-8.81-14.25-9.05-27.83-38.21-28.99-43.41-.41-1.81-.59-2.91-.58-3.66v-.02c.03-1.4.72-1.61 1.92-3.02.58-.68 2.31-.45 4.43.2 6.14 1.87 11.33 6.08 14.54 11.64 2.97 5.14 7.72 11.57 13.54 13.13 10.06 2.68 9.22 4.35 12.93 14.58 3.7 10.23 13.05 11.9 24.78 23.96 11.73 12.07 10.22 24.81 10.22 24.81z"
                  ></path>
                  <path
                    fill="#41aaf7"
                    d="M87.94 786.57c-6.75-2.67-13.45-5.59-18.51-8.81-14.25-9.05-27.83-38.21-28.99-43.41-.41-1.81-.59-2.91-.58-3.66.04.34.7 4.96 8.13 8.03 7.7 3.18 9.21 3.18 10.22 8.04 1.01 4.86 1.85 10.06 5.87 11.06 4.02 1.01 6.54-3.52 9.71 3.85 3.19 7.37 4.71 9.89 7.63 10.89 2.93 1.01 5.15-.5 5.8 5.2.39 3.48.61 6.78.72 8.81z"
                  ></path>
                  <path
                    fill="#2a94f4"
                    d="M134.54 815.97h1.99s3.89-70.55 9.24-77.1c3.45-4.23 14.85-11.8 29.37-17.56 7.99-3.17 15.94-6.62 21.93-10.43 16.88-10.72 32.96-45.26 34.34-51.42.49-2.14.7-3.44.69-4.34v-.02c-.04-1.66-.86-1.91-2.27-3.57-.68-.81-2.74-.53-5.25.24-7.28 2.22-13.42 7.2-17.22 13.79-3.52 6.09-9.15 13.71-16.04 15.55-11.91 3.18-10.92 5.16-15.32 17.27-4.38 12.11-15.46 14.09-29.35 28.38-13.9 14.29-12.11 89.21-12.11 89.21z"
                  ></path>
                  <path
                    fill="#41aaf7"
                    d="M175.14 721.31c7.99-3.17 15.94-6.62 21.93-10.43 16.88-10.72 32.96-45.26 34.34-51.42.49-2.14.7-3.44.69-4.34-.05.41-.83 5.87-9.62 9.5-9.12 3.76-10.91 3.76-12.1 9.53-1.19 5.75-2.19 11.91-6.95 13.1-4.76 1.19-7.74-4.17-11.51 4.56-3.78 8.73-5.57 11.71-9.04 12.9-3.47 1.19-6.1-.6-6.87 6.16-.48 4.13-.74 8.04-.87 10.44z"
                  ></path>
                  <path
                    fill="#cce9ff"
                    d="M125.31 893.62c21.68 0 30.83-17.31 34.43-35.68-21.25-8.06-48.01-20.97-70.21-40.43-1.32 13.04-5.6 76.11 35.78 76.11z"
                  ></path>
                  <path
                    fill="#b6e7ff"
                    d="M956.44 896.27c14.35 0 20.4-11.46 22.79-23.62 2.69-13.71.72-28.31.72-28.31h-47.01s-.07.56-.18 1.55c-.88 8.64-3.71 50.38 23.68 50.38z"
                  ></path>
                  <path
                    fill="#85ddff"
                    d="M932.93 844.35c0 1.03 10.52 1.86 23.51 1.86 12.98 0 23.51-.83 23.51-1.86 0-1.03-10.52-1.86-23.51-1.86-12.98 0-23.51.83-23.51 1.86z"
                  ></path>
                  <path
                    fill="#2a94f4"
                    d="M879.35 688.23s29.68 45.15 47.48 72.71c17.81 27.56 22.47 33.28 24.59 42.18 2.12 8.9 4.03 41.76 4.03 41.76h2.33s1.48-27.77-1.27-36.88c-2.76-9.11-1.7-12.72-.42-22.26 1.27-9.54 2.97-24.8-6.68-35.4-9.64-10.6-7.1-20.98-10.49-27.98-3.39-7-29.68-15.47-33.07-22.68-3.39-7.21-18.23-11.66-26.5-11.45z"
                  ></path>
                  <path
                    fill="#41aaf7"
                    d="M885.84 688.23s9.33 10.6 15.69 14.2c6.36 3.6 9.33.42 14.2 9.11 4.88 8.69 5.06 12.51 9.53 16.96 4.46 4.45 9.76 4.66 10.19 14.41.42 9.75-2.12 18.02-2.12 18.02s-45.58-70.37-47.49-72.7z"
                  ></path>
                  <path
                    fill="#2a94f4"
                    d="m965.32 844.35 1.7-.51s-2.95-11.68-.04-18.65c1.87-4.5 13.19-12.36 24.12-20.99 6.02-4.75 11.92-9.74 16.07-14.53 11.68-13.48 16.57-47.11 16.18-52.73-.13-1.96-.28-3.12-.52-3.88l-.01-.02c-.45-1.41-1.22-1.41-2.86-2.47-.79-.52-2.48.25-4.42 1.55-5.65 3.76-9.62 9.59-11.19 16.19-1.45 6.11-4.31 14.06-9.72 17.39-9.36 5.77-8.01 7.2-8.67 18.68-.64 11.47-9.6 16-17.81 31.77-8.22 15.76-2.83 28.2-2.83 28.2z"
                  ></path>
                  <path
                    fill="#41aaf7"
                    d="M991.1 804.19c6.02-4.75 11.92-9.74 16.07-14.53 11.68-13.48 16.57-47.11 16.18-52.73-.13-1.96-.28-3.12-.52-3.88.06.36.79 5.23-5.79 10.59-6.83 5.55-8.36 6.01-7.9 11.24.46 5.22 1.18 10.74-2.59 12.98-3.77 2.24-7.68-1.58-8.66 6.84-.99 8.43-1.76 11.43-4.42 13.34-2.66 1.9-5.36 1.05-4.3 7.02.65 3.63 1.43 7.04 1.93 9.13z"
                  ></path>
                  <path
                    fill="#cce9ff"
                    d="M956.44 896.27c14.35 0 20.4-11.46 22.79-23.62-14.06-5.33-31.78-13.88-46.47-26.76-.88 8.64-3.71 50.38 23.68 50.38z"
                  ></path>
                </svg>
              </div>
            </div>
          </div>
        </div>
      </div>

      <ErrorModal isOpen={errorModalOpen} closeModal={closeModal} />
    </>
  );
}

export default PersonalProfile;
